[workspace]

members = [
    "necsim/core",
    
    "necsim/impls/std",
    "necsim/impls/no-std",
    "necsim/impls/cuda",
    "necsim/impls/mpi",

    "necsim/plugins/core",
    "necsim/plugins/common",
    "necsim/plugins/csv",
    "necsim/plugins/coalescence",
    "necsim/plugins/metacommunity",

    "rustcoalescence",

    "rustcoalescence/linker",

    "rustcoalescence/scenarios",

    "rustcoalescence/algorithms",
    "rustcoalescence/algorithms/monolithic",
    "rustcoalescence/algorithms/independent",
    "rustcoalescence/algorithms/cuda",
    "rustcoalescence/algorithms/cuda/kernel",
    "rustcoalescence/algorithms/cuda/kernel/specialiser",
    "rustcoalescence/algorithms/cuda/kernel/ptx-jit",

    "rust-cuda",
    "rust-cuda/rust-cuda-derive",

    "analysis/rng/practrand",
    "analysis/rng/ent",
    "analysis/rng/testu01",
]

default-members = [
    "rustcoalescence",
    
    "necsim/plugins/common",
    "necsim/plugins/csv",
    "necsim/plugins/metacommunity",
]

[patch.crates-io]
array2d = { path = "third-party/array2d-no-std" }
float_next_after = { path = "third-party/float-next-after-no-std" }
ptx-builder = { path = "third-party/rust-ptx-builder" }
type-layout = { path = "third-party/type-layout" }
tynm = { path = "third-party/tynm" }
memoffset = { path = "third-party/memoffset" }
rustacuda = { path = "third-party/RustaCUDA" }
rustacuda_core = { path = "third-party/RustaCUDA/rustacuda_core" }
rustacuda_derive = { path = "third-party/RustaCUDA/rustacuda_derive" }
mpi = { git = "https://github.com/rsmpi/rsmpi", rev = "e9b1844" }
slab = { git = "https://github.com/tokio-rs/slab.git", rev = "57f69fd" }
contracts = { path = "third-party/contracts" }
ron = { path = "third-party/ron" }

[profile.release]
opt-level = 3
lto = "fat"
